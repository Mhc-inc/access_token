
<!DOCTYPE html>
<html lang="zh">
    
    <head>
            <title>Title</title>
            <script src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-3.2.1.js"></script>
            <!--script>
                
                function post(URL, PARAMS) {
                    var temp = document.createElement("form");
                    temp.action = URL;
                    temp.method = "post";
                    for (var x in PARAMS) {
                        var opt = document.createElement("input");
                        opt.name = x;
                        opt.value = PARAMS[x];
                        // alert(opt.name)
                        temp.appendChild(opt);
                    }
                    document.body.appendChild(temp);
                    temp.submit();
                    document.body.removeChild(temp);
                    return temp;
                }
            </script-->
    </head>
    <body>
        <script type="text/javascript">
            if(location.search.includes("code")){
                const code = location.search.split("?code=")[1]
                const client_id = 'ba26e9112eeaca75e996';
                const redirect_uri = 'https://mhc-inc.github.io/access_token';
                const client_secret = '4f506cf79f322a36c52ab634f074debb4c44329e';
                const accessToken_uri = 'https://github.com/login/oauth/access_token';
                /*
                var postData = "?client_id="+client_id+"&client_secret="+client_secret+"&code="+code+"&redirect_uri="+redirect_uri;
                const Http = new XMLHttpRequest();
                const url=accessToken_uri+postData;
                Http.open("POST", url);
                Http.send();
                Http.onreadystatechange=(e)=>{
                    document.all[0].innerHTML = Http.responseText;
                }
                */
                $.ajax({
                    url: accessToken_uri,
                    type: 'POST',
                    dataType: 'jsonp',  // 请求方式为json
                    data: {
                        code:code,
                        redirect_uri:redirect_uri,
                        client_secret:client_secret,
                        client_id:client_id
                    },
                    async:false,
                    jsonp: "callback",//传递给请求处理程序或页面的，用以获得jsonp回调函数名的参数名(一般默认为:callback)
                    jsonpCallback:"?",//自定义的jsonp回调函数名称，默认为jQuery自动生成的随机函数名，也可以写"?"，jQuery会自动为你处理数据
                    success: function(data){
                        document.write(data);
                    },
                    error: function(){
                 alert('fail');
             }

                });
            }
        </script>
    </body>
</html>
